<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>UkrMova Pro</title>
  <style>
    :root{--blue:#00a2ff;--red:#ff4d4d;--green:#2ecc71;--gold:#f1c40f;--dark:#d32f2f}
    body{margin:0;padding:0;background:#000;color:#fff;font-family:sans-serif;overflow:hidden}
    #splash{position:fixed;inset:0;z-index:9999;background:#000;display:flex;align-items:center;justify-content:center}
    #splash-video{width:100%;height:100%;object-fit:cover}
    .screen{display:none;flex-direction:column;min-height:100vh;padding:20px;box-sizing:border-box}
    .active{display:flex}
    .card{background:rgba(255,255,255,0.92);backdrop-filter:blur(10px);padding:20px;border-radius:20px;border:1px solid #444;margin:auto;width:100%;max-width:450px;box-shadow:0 0 20px rgba(0,0,0,0.3)}
    .btn{background:var(--blue);color:#fff;border:none;padding:14px;border-radius:12px;font-weight:700;width:100%;margin:6px 0;cursor:pointer;text-transform:uppercase;transition:all .2s}
    .btn:hover{transform:scale(1.02);box-shadow:0 0 15px rgba(0,162,255,.6)}
    .btn.green{background:var(--green)}
    .btn.danger{background:var(--dark)}
    .money{font-size:32px;font-weight:900;color:var(--gold);text-shadow:0 0 10px #f1c40f}
    .nickname{font-size:28px;font-weight:bold;margin:10px 0;cursor:pointer}
    .gold-nick{color:var(--gold);text-shadow:0 0 10px var(--gold)}
    input{background:#f5f5f5;border:1px solid #444;padding:10px;border-radius:8px;color:#000;width:90%;margin-bottom:8px}
    .shop-item{background:#eee;padding:12px;margin:8px 0;border-radius:10px;cursor:pointer}
    .shop-item.bought{background:#c8e6c9}
    .shop-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    .theme-btn{background:#9c27b0;color:white}
    .section-title{font-size:22px;font-weight:bold;color:var(--gold);margin:20px 0 10px;text-align:center}
    .log-box{max-height:220px;overflow-y:auto;border:1px solid #ccc;padding:10px;margin:10px 0;background:#f8f8f8;border-radius:8px}
    .log-entry{padding:4px 0;border-bottom:1px solid #eee}
    #admin-panel{border:2px dashed var(--red);padding:15px;margin-top:15px;display:none;background:rgba(255,255,255,0.92);text-align:left;border-radius:15px}
    #feedback{text-align:center;font-size:48px;font-weight:bold;margin:20px 0;min-height:60px}
    .correct {color:#2ecc71;}
    .wrong {color:#ff4d4d;}
    .summary {font-size:24px; line-height:1.6; margin:30px 0; text-align:center;}
    .summary strong {font-size:28px;}
  </style>
</head>
<body>

<!-- –ó–∞—Å—Ç–∞–≤–∫–∞ –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –∑–≤—É–∫–æ–º -->
<div id="splash">
  <video id="splash-video" autoplay playsinline preload="auto">
    <source src="https://file.garden/aZHnP_3ch2qR4tWj/video_2026-02-14_17-15-12.mp4" type="video/mp4">
    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î –≤—ñ–¥–µ–æ.
  </video>
</div>

<div id="auth-screen" class="screen">
  <div class="card">
    <h2 style="color:var(--gold)">UKRMOVA PRO</h2>
    <input type="text" id="nick" placeholder="–ù—ñ–∫–Ω–µ–π–º" autocomplete="off">
    <input type="password" id="pass" placeholder="–ü–∞—Ä–æ–ª—å" autocomplete="off">
    <button class="btn" onclick="auth()">–£–í–Ü–ô–¢–ò / –ó–ê–†–ï–Ñ–°–¢–†–£–í–ê–¢–ò–°–Ø</button>
    <p id="auth-error" style="color:red; margin-top:10px; min-height:24px;"></p>
  </div>
</div>

<div id="menu" class="screen">
  <div class="card">
    <h3 onclick="admT()" style="cursor:pointer">–ú–ï–ù–Æ</h3>
    <div class="nickname" id="playerNick"></div>
    <div class="money"><span id="mon">0</span> ‚Ç¥</div>
    <button class="btn" onclick="show('themes')">–ì–†–ê–¢–ò</button>
    <button class="btn" style="background:#333" onclick="loadT()">–¢–û–ü</button>
    <button class="btn green" onclick="show('shop')">–ú–ê–ì–ê–ó–ò–ù</button>

    <div id="admin-panel">
      <b style="color:var(--red);cursor:pointer" onclick="closeAdm()">‚ùå –ó–ê–ö–†–ò–¢–ò</b><br><br>
      <button class="btn" id="pen-btn" style="background:var(--red)" onclick="toggleP()">–®–¢–†–ê–§–ò: –í–ö–õ</button>
      <p><b>–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≥—Ä–∞–≤—Ü—è–º–∏</b></p>
      <input type="text" id="a-n" placeholder="–ù—ñ–∫ –≥—Ä–∞–≤—Ü—è">
      <button class="btn" style="background:var(--green);color:#000" onclick="edO(true)">+ –ì–†–û–®–Ü</button>
      <button class="btn" style="background:var(--red)" onclick="edO(false)">- –ì–†–û–®–Ü</button>
      <button class="btn danger" onclick="delU()">–í–ò–î–ê–õ–ò–¢–ò –ó–ê –ù–Ü–ö–û–ú</button>
      <br><br>
      <button class="btn" style="background:var(--blue);width:100%" onclick="loadPlayers()">–ü–û–ö–ê–ó–ê–¢–ò –í–°–Ü–• –ì–†–ê–í–¶–Ü–í</button>
      <div id="player-list" style="max-height:250px;overflow-y:auto;margin:15px 0;background:#fff;padding:10px;border:1px solid #ccc;border-radius:8px"></div>
      <br><br>
      <h4 style="color:var(--blue)">–õ–æ–≥ —É—Å—ñ—Ö –≤—Ö–æ–¥—ñ–≤ —É –≥—Ä—É</h4>
      <div id="user-log" class="log-box">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
      <button class="btn" style="background:#ff9800;margin-top:8px" onclick="loadUserLog()">–û–Ω–æ–≤–∏—Ç–∏</button>
      <button class="btn danger" style="margin-top:8px" onclick="clearUserLog()">–û—á–∏—Å—Ç–∏—Ç–∏</button>
      <br><br>
      <h4 style="color:var(--blue)">–õ–æ–≥ –≤—Ö–æ–¥—ñ–≤ –≤ –∞–¥–º—ñ–Ω–∫—É</h4>
      <div id="admin-log" class="log-box">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
      <button class="btn" style="background:#ff9800" onclick="loadAdminLogs()">–û–Ω–æ–≤–∏—Ç–∏</button>
      <button class="btn danger" onclick="clearAdminLogs()">–û—á–∏—Å—Ç–∏—Ç–∏</button>
    </div>
  </div>
</div>

<!-- –í–∏–±—ñ—Ä —Ä–æ–∑–¥—ñ–ª—ñ–≤: –Ü–º–µ–Ω–Ω–∏–∫–∏ / –ü—Ä–∏–∫–º–µ—Ç–Ω–∏–∫–∏ -->
<div id="themes" class="screen">
  <div class="card">
    <h2>–û–±–µ—Ä–∏ —Ä–æ–∑–¥—ñ–ª</h2>

    <div class="section-title">–Ü–º–µ–Ω–Ω–∏–∫–∏</div>
    <button class="btn theme-btn" onclick="show('imennyky')">–í—ñ–¥–º—ñ–Ω–∏ —ñ–º–µ–Ω–Ω–∏–∫—ñ–≤</button>
    <button class="btn theme-btn" onclick="startTheme('orudnyi_1vidmina')">–û—Ä—É–¥–Ω–∏–π –≤—ñ–¥–º—ñ–Ω–æ–∫ 1 –≤—ñ–¥–º—ñ–Ω–∏</button>

    <div class="section-title">–ü—Ä–∏–∫–º–µ—Ç–Ω–∏–∫–∏</div>
    <button class="btn theme-btn" onclick="startTheme('prykmetnyky')">–ü—Ä–∏–∫–º–µ—Ç–Ω–∏–∫–∏</button>
    <button class="btn theme-btn" onclick="startTheme('grupy_prykmetnykiv')">–ì—Ä—É–ø–∏ –ø—Ä–∏–∫–º–µ—Ç–Ω–∏–∫—ñ–≤ –∑–∞ –∑–Ω–∞—á–µ–Ω–Ω—è–º</button>
    <button class="btn theme-btn" onclick="startTheme('prykmetnyky_stupeni')">–°—Ç—É–ø–µ–Ω—ñ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä–∏–∫–º–µ—Ç–Ω–∏–∫—ñ–≤</button>

    <button class="btn red" style="margin-top:20px" onclick="show('menu')">–ù–ê–ó–ê–î</button>
  </div>
</div>

<!-- –ü—ñ–¥—Ä–æ–∑–¥—ñ–ª –Ü–º–µ–Ω–Ω–∏–∫–∏ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—ñ–ª—å—à–µ —Ç–µ–º ‚Äî –¥–æ–¥–∞–≤–∞–π —Å—é–¥–∏) -->
<div id="imennyky" class="screen">
  <div class="card">
    <h2>–Ü–º–µ–Ω–Ω–∏–∫–∏</h2>
    <button class="btn theme-btn" onclick="startTheme('vydminy')">–í—ñ–¥–º—ñ–Ω–∏ —ñ–º–µ–Ω–Ω–∏–∫—ñ–≤</button>
    <button class="btn theme-btn" onclick="startTheme('orudnyi_1vidmina')">–û—Ä—É–¥–Ω–∏–π –≤—ñ–¥–º—ñ–Ω–æ–∫ 1 –≤—ñ–¥–º—ñ–Ω–∏</button>
    <button class="btn red" onclick="show('themes')">–ù–ê–ó–ê–î</button>
  </div>
</div>

<div id="game" class="screen">
  <div class="card">
    <h3 id="qtext"></h3>
    <div id="feedback"></div>
    <div id="abox"></div>
    <button class="btn red" style="margin-top:20px;" onclick="show('themes')">–ù–ê–ó–ê–î</button>
  </div>
</div>

<div id="shop" class="screen">
  <div class="card">
    <h2>–ú–∞–≥–∞–∑–∏–Ω</h2>
    <div class="shop-grid">
      <div class="shop-item" onclick="buyItem('gold_frame')">–ó–æ–ª–æ—Ç–∞ —Ä–∞–º–∫–∞ ‚Äî 1000 ‚Ç¥</div>
      <div class="shop-item" onclick="buyItem('crown')">–ö–æ—Ä–æ–Ω–∞ ‚Äî 2000 ‚Ç¥</div>
      <div class="shop-item" onclick="buyItem('fire')">–ü–æ–ª—É–º'—è ‚Äî 1500 ‚Ç¥</div>
      <div class="shop-item" onclick="buyItem('shield')">–©–∏—Ç ‚Äî 2500 ‚Ç¥</div>
      <div class="shop-item" onclick="buyItem('vip')">–í–Ü–ü ‚Äî 5000 ‚Ç¥</div>
    </div>
    <button class="btn" onclick="show('menu')">–ù–ê–ó–ê–î</button>
  </div>
</div>

<div id="top" class="screen">
  <div class="card">
    <h3>–¢–û–ü 1000</h3>
    <div id="tlist">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
    <button class="btn" onclick="show('menu')">–ù–ê–ó–ê–î</button>
  </div>
</div>

<script>
const DB = "https://ukrmova-game-default-rtdb.europe-west1.firebasedatabase.app/";
let user = null, cC = 0, pOn = true;
let currentTheme = '', currentIndex = 0, correctCount = 0, wrongCount = 0;
let items = { gold_frame: false, crown: false, fire: false, shield: false, vip: false };
let currentCorrectAnswer = '';

const correctSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3");
const wrongSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3");

const themes = {
  vydminy: [
    {q:"–î–æ —è–∫–æ—ó –≤—ñ–¥–º—ñ–Ω–∏ –Ω–∞–ª–µ–∂–∏—Ç—å —Å–ª–æ–≤–æ ¬´–∫–Ω–∏–≥–∞¬ª?", a:"–ø–µ—Ä—à–∞ –≤—ñ–¥–º—ñ–Ω–∞", w:["–¥—Ä—É–≥–∞ –≤—ñ–¥–º—ñ–Ω–∞","—Ç—Ä–µ—Ç—è –≤—ñ–¥–º—ñ–Ω–∞","—á–µ—Ç–≤–µ—Ä—Ç–∞ –≤—ñ–¥–º—ñ–Ω–∞"]},
    {q:"–î–æ —è–∫–æ—ó –≤—ñ–¥–º—ñ–Ω–∏ –Ω–∞–ª–µ–∂–∏—Ç—å —Å–ª–æ–≤–æ ¬´—Å—Ç—ñ–ª¬ª?", a:"–¥—Ä—É–≥–∞ –≤—ñ–¥–º—ñ–Ω–∞", w:["–ø–µ—Ä—à–∞ –≤—ñ–¥–º—ñ–Ω–∞","—Ç—Ä–µ—Ç—è –≤—ñ–¥–º—ñ–Ω–∞","—á–µ—Ç–≤–µ—Ä—Ç–∞ –≤—ñ–¥–º—ñ–Ω–∞"]},
    {q:"–î–æ —è–∫–æ—ó –≤—ñ–¥–º—ñ–Ω–∏ –Ω–∞–ª–µ–∂–∏—Ç—å —Å–ª–æ–≤–æ ¬´–º–∞—Ç–∏¬ª?", a:"—Ç—Ä–µ—Ç—è –≤—ñ–¥–º—ñ–Ω–∞", w:["–ø–µ—Ä—à–∞ –≤—ñ–¥–º—ñ–Ω–∞","–¥—Ä—É–≥–∞ –≤—ñ–¥–º—ñ–Ω–∞","—á–µ—Ç–≤–µ—Ä—Ç–∞ –≤—ñ–¥–º—ñ–Ω–∞"]},
    {q:"–î–æ —è–∫–æ—ó –≤—ñ–¥–º—ñ–Ω–∏ –Ω–∞–ª–µ–∂–∏—Ç—å —Å–ª–æ–≤–æ ¬´—ñ–º'—è¬ª?", a:"—á–µ—Ç–≤–µ—Ä—Ç–∞ –≤—ñ–¥–º—ñ–Ω–∞", w:["–ø–µ—Ä—à–∞ –≤—ñ–¥–º—ñ–Ω–∞","–¥—Ä—É–≥–∞ –≤—ñ–¥–º—ñ–Ω–∞","—Ç—Ä–µ—Ç—è –≤—ñ–¥–º—ñ–Ω–∞"]},
    // ... (–≤—Å—ñ —ñ–Ω—à—ñ –ø–∏—Ç–∞–Ω–Ω—è –∑ —ñ–º–µ–Ω–Ω–∏–∫–∞–º–∏, —è–∫—â–æ —Ç—Ä–µ–±–∞ ‚Äî –¥–æ–¥–∞–≤–∞–π)
  ],
  orudnyi_1vidmina: [
    {q:"–û—Ä—É–¥–Ω–∏–π –≤—ñ–¥–º—ñ–Ω–æ–∫ —Å–ª–æ–≤–∞ ¬´–∫–Ω–∏–∂–∫–∞¬ª?", a:"-–æ—é", w:["-–µ—é","-—î—é"]},
    {q:"–û—Ä—É–¥–Ω–∏–π –≤—ñ–¥–º—ñ–Ω–æ–∫ —Å–ª–æ–≤–∞ ¬´–¥—É—à–∞¬ª?", a:"-–µ—é", w:["-–æ—é","-—î—é"]},
    // ... (—Ç–≤–æ—ó –ø–∏—Ç–∞–Ω–Ω—è)
  ],
  prykmetnyky: [
    {q:"–Ø–∫–∏–π —Ä—ñ–¥ –ø—Ä–∏–∫–º–µ—Ç–Ω–∏–∫–∞ ¬´–≥–∞—Ä–Ω–∞ –¥—ñ–≤—á–∏–Ω–∞¬ª?", a:"–∂—ñ–Ω–æ—á–∏–π —Ä—ñ–¥", w:["—á–æ–ª–æ–≤—ñ—á–∏–π —Ä—ñ–¥"]},
    // ... (—Ç–≤–æ—ó –ø–∏—Ç–∞–Ω–Ω—è –ø—Ä–æ –ø—Ä–∏–∫–º–µ—Ç–Ω–∏–∫–∏)
  ],
  grupy_prykmetnykiv: [
    {q:"–î–æ —è–∫–æ—ó –≥—Ä—É–ø–∏ –∑–∞ –∑–Ω–∞—á–µ–Ω–Ω—è–º –Ω–∞–ª–µ–∂–∏—Ç—å –ø—Ä–∏–∫–º–µ—Ç–Ω–∏–∫ ¬´–≥–∞—Ä–Ω–∞¬ª?", a:"—è–∫—ñ—Å–Ω–∏–π", w:["–≤—ñ–¥–Ω–æ—Å–Ω–∏–π","–ø—Ä–∏—Å–≤—ñ–π–Ω–∏–π"]},
    // ... (—Ç–≤–æ—ó –ø–∏—Ç–∞–Ω–Ω—è)
  ],
  prykmetnyky_stupeni: [
    { q: "–Ω–∞–π–≤–µ—Å–µ–ª—ñ—à–∏–π ‚Äî —è–∫–∏–π —Ü–µ —Å—Ç—É–ø—ñ–Ω—å?", a: "–Ω–∞–π–≤–∏—â–∏–π", w: ["–Ω—É–ª—å–æ–≤–∏–π", "–≤–∏—â–∏–π"] },
    // ... (—Ç–≤–æ—ó –ø–∏—Ç–∞–Ω–Ω—è)
  ].sort(() => Math.random() - 0.5)
};

async function auth() {
  let n = document.getElementById('nick').value.trim(), p = document.getElementById('pass').value.trim();
  if(!n || !p) return document.getElementById('auth-error').textContent = "–í–≤–µ–¥—ñ—Ç—å –Ω—ñ–∫–Ω–µ–π–º —Ç–∞ –ø–∞—Ä–æ–ª—å";
  document.getElementById('auth-error').textContent = "–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...";
  try {
    let r = await fetch(DB + "users/" + n + ".json");
    let d = await r.json();
    if (d) {
      if (d.pass !== p) return document.getElementById('auth-error').textContent = "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å!";
      user = d;
    } else {
      user = {name:n, pass:p, points:0, items:{gold_frame:false}};
      await fetch(DB + "users/" + n + ".json", {method:'PUT', body:JSON.stringify(user)});
    }
    localStorage.setItem('un', n);
    localStorage.setItem('up', p);
    await fetch(DB + "user_logs.json", {method:'POST',body:JSON.stringify({game_nick:n, time:new Date().toLocaleString('uk-UA')})});
    items = user.items || {gold_frame:false};
    save(); applyItems(); update(); show('menu');
    document.getElementById('auth-error').textContent = "";
  } catch(e) {
    document.getElementById('auth-error').textContent = "–ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è";
  }
}

window.onload = function() {
  const splash = document.getElementById('splash');
  const video = document.getElementById('splash-video');

  // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –Ω–∞–º–∞–≥–∞—î–º–æ—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∑—ñ –∑–≤—É–∫–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
  video.play().then(() => {
    console.log("–í—ñ–¥–µ–æ –∑–∞–ø—É—â–µ–Ω–æ –∑—ñ –∑–≤—É–∫–æ–º");
  }).catch(err => {
    console.log("–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∑—ñ –∑–≤—É–∫–æ–º –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ:", err);
    // –Ø–∫—â–æ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ ‚Äî –∑–≤—É–∫ –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ –∫–ª—ñ–∫—É
    document.body.addEventListener('click', () => {
      video.muted = false;
      video.play().catch(() => {});
    }, { once: true });
  });

  video.onended = function() {
    splash.style.display = 'none';
    document.getElementById('auth-screen').classList.add('active');
    const savedNick = localStorage.getItem('un');
    const savedPass = localStorage.getItem('up');
    if(savedNick && savedPass) {
      document.getElementById('nick').value = savedNick;
      document.getElementById('pass').value = savedPass;
      auth();
    }
  };

  setTimeout(() => {
    if (splash.style.display !== 'none') {
      splash.style.display = 'none';
      document.getElementById('auth-screen').classList.add('active');
    }
  }, 40000);
};

function save() {
  user.items = items;
  fetch(DB + "users/" + user.name + ".json", {method:'PUT', body:JSON.stringify(user)});
}

function update() {
  document.getElementById('mon').innerText = user.points.toLocaleString();
}

function applyItems() {
  let nickDisplay = user.name;
  if(items.gold_frame) nickDisplay += ' <span class="gold-nick">[–ó–æ–ª–æ—Ç–æ]</span>';
  if(items.crown) nickDisplay += ' üëë';
  if(items.fire) nickDisplay += ' üî•';
  if(items.shield) nickDisplay += ' üõ°Ô∏è';
  if(items.vip) nickDisplay += ' üíé VIP';
  document.getElementById('playerNick').innerHTML = nickDisplay;
}

function show(id) {
  document.querySelectorAll('.screen').forEach(s=>s.style.display='none');
  document.getElementById(id).style.display='block';
}

// —Ä–µ—à—Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–π (admT, delU, edO, loadPlayers, loadT, buyItem, startTheme, loadQuestion, checkAnswer —Ç–æ—â–æ) –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –±–µ–∑ –∑–º—ñ–Ω
// (—â–æ–± –Ω–µ –¥—É–±–ª—é–≤–∞—Ç–∏ 1000 —Ä—è–¥–∫—ñ–≤ ‚Äî –≤–æ–Ω–∏ —ñ–¥–µ–Ω—Ç–∏—á–Ω—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–º –≤–µ—Ä—Å—ñ—è–º)

function startTheme(theme) {
  currentTheme = theme;
  currentIndex = 0;
  correctCount = 0;
  wrongCount = 0;
  show('game');
  loadQuestion();
}

// ... (–≤—Å—ñ —ñ–Ω—à—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –±–µ–∑ –∑–º—ñ–Ω)
</script>
</body>
</html>
